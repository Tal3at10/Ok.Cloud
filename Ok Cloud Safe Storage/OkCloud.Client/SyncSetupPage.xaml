<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="OkCloud.Client.SyncSetupPage"
             Title="Sync Setup"
             BackgroundColor="#0f0f0f">

    <Grid Padding="40">
        <!-- Step 1: Choose Folder -->
        <StackLayout x:Name="StepChooseFolder" IsVisible="True" VerticalOptions="Center" HorizontalOptions="Center" Spacing="30">
            <Image Source="dotnet_bot.png" WidthRequest="100" HeightRequest="100" HorizontalOptions="Center"/>
            
            <Label Text="Sync Location" 
                   FontSize="32" 
                   FontAttributes="Bold" 
                   HorizontalOptions="Center"
                   TextColor="White"/>
            
            <Frame BackgroundColor="#1a1a1a" 
                   BorderColor="#2a2a2a" 
                   CornerRadius="12" 
                   Padding="30"
                   MaximumWidthRequest="600">
                
                <StackLayout Spacing="15">
                    <Label Text="LOCAL PATH" 
                           FontSize="12" 
                           TextColor="#9ca3af"/>
                    
                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                        <Entry x:Name="SyncPathEntry" 
                               Grid.Column="0"
                               Text=""
                               BackgroundColor="#0a0a0a"
                               TextColor="White"
                               FontSize="14"
                               Placeholder="Choose a folder..."/>
                        
                        <Button Grid.Column="1"
                                Text="Change"
                                Clicked="OnChooseFolderClicked"
                                BackgroundColor="#2a2a2a"
                                TextColor="White"
                                CornerRadius="8"
                                Padding="20,10"/>
                    </Grid>
                    
                    <Label Text="Quick Locations:" 
                           FontSize="12" 
                           TextColor="#9ca3af"
                           Margin="0,10,0,5"/>
                    
                    <HorizontalStackLayout Spacing="10">
                        <Button Text="ðŸ“ Documents"
                                Clicked="OnDocumentsFolderClicked"
                                BackgroundColor="#0a0a0a"
                                TextColor="#9ca3af"
                                BorderColor="#2a2a2a"
                                BorderWidth="1"
                                CornerRadius="6"
                                Padding="10,5"
                                FontSize="12"/>
                        <Button Text="ðŸ’¾ Desktop"
                                Clicked="OnDesktopFolderClicked"
                                BackgroundColor="#0a0a0a"
                                TextColor="#9ca3af"
                                BorderColor="#2a2a2a"
                                BorderWidth="1"
                                CornerRadius="6"
                                Padding="10,5"
                                FontSize="12"/>
                        <Button Text="ðŸ  Home"
                                Clicked="OnHomeFolderClicked"
                                BackgroundColor="#0a0a0a"
                                TextColor="#9ca3af"
                                BorderColor="#2a2a2a"
                                BorderWidth="1"
                                CornerRadius="6"
                                Padding="10,5"
                                FontSize="12"/>
                    </HorizontalStackLayout>
                    
                    <Label x:Name="PathStatusLabel"
                           Text="âœ“ Writable"
                           FontSize="12"
                           TextColor="#10b981"
                           IsVisible="False"/>
                </StackLayout>
            </Frame>
            
            <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20" MaximumWidthRequest="600">
                <Button Grid.Column="0"
                        Text="Back"
                        Clicked="OnBackClicked"
                        BackgroundColor="Transparent"
                        TextColor="#9ca3af"
                        BorderWidth="0"
                        Padding="20,12"/>
                
                <Button Grid.Column="1"
                        x:Name="StartSyncButton"
                        Text="Start Syncing ðŸš€"
                        Clicked="OnStartSyncClicked"
                        BackgroundColor="#ff5500"
                        TextColor="White"
                        FontAttributes="Bold"
                        CornerRadius="8"
                        Padding="20,12"
                        IsEnabled="False"/>
            </Grid>
        </StackLayout>

        <!-- Step 2: Syncing Progress -->
        <StackLayout x:Name="StepSyncing" IsVisible="False" VerticalOptions="Center" HorizontalOptions="Center" Spacing="30">
            <ActivityIndicator IsRunning="True" 
                              Color="#ff5500" 
                              WidthRequest="60" 
                              HeightRequest="60"
                              HorizontalOptions="Center"/>
            
            <Label Text="Setting up..." 
                   FontSize="28" 
                   FontAttributes="Bold" 
                   HorizontalOptions="Center"
                   TextColor="White"/>
            
            <Label x:Name="SyncStageLabel"
                   Text="Fetching file list..." 
                   FontSize="16" 
                   HorizontalOptions="Center"
                   TextColor="#9ca3af"/>
            
            <Frame BackgroundColor="#1a1a1a" 
                   BorderColor="#2a2a2a" 
                   CornerRadius="12" 
                   Padding="30"
                   MaximumWidthRequest="700"
                   MinimumWidthRequest="600">
                
                <StackLayout Spacing="15">
                    <Grid ColumnDefinitions="Auto,*" ColumnSpacing="10">
                        <Label Grid.Column="0"
                               Text="Progress"
                               FontSize="14"
                               TextColor="#9ca3af"/>
                        <Label Grid.Column="1"
                               x:Name="ProgressPercentLabel"
                               Text="35%"
                               FontSize="14"
                               FontAttributes="Bold"
                               TextColor="#ff5500"
                               HorizontalOptions="End"/>
                    </Grid>
                    
                    <ProgressBar x:Name="SyncProgressBar"
                                Progress="0.35"
                                ProgressColor="#ff5500"
                                BackgroundColor="#2a2a2a"
                                HeightRequest="8"/>
                    
                    <HorizontalStackLayout Spacing="10">
                        <ActivityIndicator IsRunning="True" 
                                          Color="#ff5500" 
                                          WidthRequest="16" 
                                          HeightRequest="16"/>
                        <Label x:Name="CurrentFileLabel"
                               Text="Loading remote index"
                               FontSize="12"
                               TextColor="#9ca3af"/>
                    </HorizontalStackLayout>
                </StackLayout>
            </Frame>
        </StackLayout>
    </Grid>
</ContentPage>
